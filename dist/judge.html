
        <!doctype html>
        <html lang="en">
        <head>
          <meta charset="utf-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="icon" href="/public//favicon.ico">
          <title>Judge</title>
          <link rel="stylesheet" href="/modules/brindle/baseline.css">
    <link rel="stylesheet" href="/modules/brindle/themes/daybreak.css">
        </head>
        <body>
          <header class="site-header">
            <div class="container header-inner">
              <a class="brand" href="/index.html">
                <img class="brand-logo" src="/public//logo.png" alt="SHERIFF" />
                <span class="brand-name">SHERIFF</span>
              </a>

              <nav id="site-nav" class="nav">
                <ul role="list"><li><a href="/index.html">Home</a></li>
<li><details class="dropdown"><summary>Docs</summary>
<ul role="list"><li><a href="/docs/index.html">Overview</a></li>
<li><details class="dropdown"><summary>Getting Started</summary>
<ul role="list"><li><a href="/docs/getting-started/index.html">Introduction</a></li><li><a href="/docs/getting-started/installation.html">Installation</a></li><li><a href="/docs/getting-started/basics.html">Basics</a></li></ul>
</details></li>
</ul>
</details></li>
<li><a href="/blog.html">Blog</a></li><li><a href="/changelog.html">Changelog</a></li></ul>
              </nav>
            </div>
          </header>

          <main class="container">
            <h1>Goblin Decision Constructs</h1>
<p><em>(Exclusive &amp; Inclusive Decision Logic)</em></p>
<h2>2) Core Syntax</h2>
<h3>2.1 <code>judge</code> â€” Exclusive</h3>
<pre lang="goblin"><code>score = 95

grade =
    judge
        score &gt;= 90: &quot;A&quot;
        score &gt;= 80: &quot;B&quot;
        score &gt;= 70: &quot;C&quot;
        else:         &quot;F&quot;
    end
</code></pre>
<ul>
<li>Evaluates top-to-bottom, stops on first truthy condition.</li>
</ul>
<h3>2.2 <code>judge_all</code> â€” Inclusive</h3>
<pre lang="goblin"><code>balance = 45
trial_days = 5
has_new_features = true
maintenance_scheduled = false

notifications =
    judge_all
        balance &lt; 50:          &quot;Low balance warning&quot;
        trial_days &lt; 7:        &quot;Trial expiring soon&quot;
        has_new_features:      &quot;Check out new tools&quot;
        maintenance_scheduled: &quot;Maintenance tonight&quot;
        else:                  &quot;All systems normal&quot;
    end

say notifications
</code></pre>
<ul>
<li>All truthy arms run; expression-form returns an array of results in arm order.</li>
</ul>
<h2>4) Enum Matching with <code>using</code></h2>
<p>Enums in Goblin can be matched by name using <code>using &lt;EnumName&gt;</code>.</p>
<pre lang="goblin"><code>/// Enum definition and matching tests
enum Status
    idle
    loading
    ready
    error
end

enum Priority
    low
    medium
    high
    critical
end

say &quot;=== testing judge with enum ===&quot;
status = Status::idle
judge status using Status
    idle:    say &quot;System is idle&quot;
    loading: say &quot;Processing...&quot;
    ready:   say &quot;Ready to proceed&quot;
    error:   say &quot;Error occurred&quot;
end

priority = Priority::high
judge priority using Priority
    low:      say &quot;Low priority&quot;
    medium:   say &quot;Medium priority&quot;
    high:     say &quot;High priority alert&quot;
    critical: say &quot;CRITICAL - Immediate action required&quot;
end
</code></pre>
<p><em>(Future: tagged-union payload destructuring &amp; guards â€” planned, see Â§12.4.)</em></p>
<h2>6) Header Return: <code>judge return &lt;expr&gt;</code></h2>
<p>A shared return value for <strong>empty</strong> matching arms.</p>
<pre lang="goblin"><code>judge return &quot;ERR&quot;
    a &lt; 0:
    b &lt; 0:
    c &lt; 0:
end
</code></pre>
<p>Equivalent to inlining <code>return &quot;ERR&quot;</code> in each empty arm. Works with both <code>judge</code> and <code>judge_all</code>.</p>
<p><em>(Header <strong>do</strong> default for non-return actions is planned; see Â§11.)</em></p>
<h2>8) Rich Condition Syntax (as in Goblin expressions)</h2>
<ul>
<li>
<p>Logical ops: <code>and</code>, <code>or</code>, <code>not</code> (with <code>()</code> precedence) â€” <strong>reuse normal expression grammar</strong>.</p>
</li>
<li>
<p>Chaining sugar <code>&lt;&gt;</code> works the same within judge conditions.</p>
</li>
<li>
<p>Ranges / filters if supported elsewhere:</p>
<pre lang="goblin"><code>shipping_cost =
    judge
        weight between 0..1:   $5.00
        weight between 1..5:   $8.00
        weight between 5..20:  $12.00
        else:                  $25.00
    end
</code></pre>
</li>
<li>
<p><code>where</code>/field-DLS examples align with existing Goblin semantics.</p>
</li>
<li>
<p>Field access operator <code>&gt;&gt;</code> used exactly as outside judge:</p>
<pre lang="goblin"><code>user_status =
    judge
        user &gt;&gt; &quot;is_premium&quot;:     &quot;premium&quot;
        user &gt;&gt; &quot;trial_expired&quot;:  &quot;expired&quot;
        user &gt;&gt; &quot;score&quot; &lt; 50:     &quot;basic&quot;
        else:                      &quot;standard&quot;
    end
</code></pre>
</li>
</ul>
<h2>10) Weighted <code>judge_all</code> â€” <strong>Planned (kept from blog post)</strong></h2>
<p>Weights prioritize inclusive actions (e.g., async engines/processors). Syntax per blog post:</p>
<pre lang="goblin"><code>actions =
    judge_all
        [10] balance &gt;&gt; amount &lt; $10:     fraud_alert(transaction)
        [5]  user &gt;&gt; new_signup:          welcome_email(user)
        [1]  analytics &gt;&gt; needed:         log_event(transaction)
        else:                             standard_processing
    end
</code></pre>
<ul>
<li>Sort by descending weight; equal weights keep source order.</li>
<li>Encourages priority <em>tiers</em> (e.g., <code>[10]</code> security, <code>[5]</code> UX setup, <code>[1]</code> analytics).</li>
<li>Runtime integration: immediate/next-tick/deferred scheduling is an engine concern, not syntax.</li>
</ul>
<p>Another real-world example (stacking status effects):</p>
<pre lang="goblin"><code>status_changes =
    judge_all
        [10] spell_cast &gt;&gt; type == &quot;fire&quot; and environment &gt;&gt; is_cold: player.warm_up.boost_fire_damage
        [7]  potion_used &gt;&gt; type == &quot;strength&quot;:                       player.double_strength.show_muscles
        [3]  area &gt;&gt; has_magic_field:                                   player.regenerate_mana.glow
        [1]  time &gt;&gt; is_night and player &gt;&gt; class == &quot;vampire&quot;:       player.night_vision.bonus_stealth
        else: &quot;No special effects&quot;
    end
</code></pre>
<blockquote>
<p><strong>Status:</strong> Parsing &amp; runtime scheduling <strong>planned</strong> for postâ€“v1.0; syntax reserved.</p>
</blockquote>
<h2>12) Additional Roadmap (Postâ€“v1.0)</h2>
<h3>12.1 Stateful vs Snapshot (for <code>judge_all</code>)</h3>
<ul>
<li><strong>Snapshot (default):</strong> evaluate all conditions once, then run matches.</li>
<li><strong>Stateful:</strong> reevaluate each arm after previous armâ€™s effects.</li>
</ul>
<pre lang="goblin"><code>mode = &quot;cold&quot;
judge_all stateful
    mode == &quot;cold&quot;:
        say &quot;warming&quot;
        mode = &quot;warm&quot;
    mode == &quot;warm&quot;:
        say &quot;now warm&quot;   /// runs only in stateful
end
</code></pre>
<h3>12.2 Structured Results (expr-form)</h3>
<p>Return a record instead of a raw array:</p>
<pre lang="goblin"><code>res =
    judge_all structured
        x % 2 == 0: &quot;even&quot;
        x % 3 == 0: &quot;div3&quot;
        else:       &quot;other&quot;
    end

/// res.matched   â†’ [&quot;even&quot;]
/// res.results   â†’ [&quot;even&quot;]
/// res.else_hit  â†’ false
</code></pre>
<h3>12.3 Hot-Reloadable Arms</h3>
<p>Load rule arms from data, compile to AST, cache, and evaluate safely.</p>
<pre lang="goblin"><code>rules = load_json(&quot;rules.json&quot;)

act apply_dynamic_rules(obj)
    judge_all from rules using obj
        else: say &quot;no rules&quot;
    end
end
</code></pre>
<h3>12.4 Enum Payloads (Tagged Unions)</h3>
<p>Future: destructuring patterns with optional guards.</p>
<pre lang="goblin"><code>ev = Event::Click(10, 20)
judge ev using Event
    Click(x, y) if x &gt; 0 and y &gt; 0: say (&quot;clicked @ &quot; + x + &quot;,&quot; + y)
    Resize(w, h) if w*h &gt; 10000:    say &quot;big resize&quot;
    Key(code) if code == &quot;Enter&quot;:  say &quot;enter pressed&quot;
    Idle:                           say &quot;idle&quot;
end
</code></pre>
<h2>14) Implementation Status Summary</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>judge</code> / <code>judge_all</code></td>
<td>âœ…</td>
</tr>
<tr>
<td><code>judge using</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>Enum name matching</td>
<td>âœ…</td>
</tr>
<tr>
<td>Mixed expr/stmt/block bodies</td>
<td>âœ…</td>
</tr>
<tr>
<td>Header <code>return &lt;expr&gt;</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>Control-flow propagation</td>
<td>âœ…</td>
</tr>
<tr>
<td>Weighted arms <code>[n]</code></td>
<td>ðŸ”œ planned (postâ€“v1.0)</td>
</tr>
<tr>
<td>Header <code>do &lt;stmt&gt;</code> default</td>
<td>ðŸ”œ planned</td>
</tr>
<tr>
<td><code>judge_all stateful</code> mode</td>
<td>ðŸ”œ planned</td>
</tr>
<tr>
<td>Structured results (expr-form)</td>
<td>ðŸ”œ planned</td>
</tr>
<tr>
<td>Hot-reloadable arms</td>
<td>ðŸ”œ planned</td>
</tr>
<tr>
<td>Enum payload destructuring</td>
<td>ðŸ”œ planned</td>
</tr>
</tbody>
</table>

          </main>

          <footer id="site-footer">
            <div class="container">
              <ul role="list"><li><a href="/docs/index.html">Docs</a></li><li><a href="/blog.html">Blog</a></li><li><a href="/changelog.html">Changelog</a></li><li><span>Â© 2025 Sheriff Docs</span></li></ul>
            </div>
          </footer>
        </body>
        </html>
        